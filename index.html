<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-analytics.js";

      import {
        getDatabase,
        ref,
        set,
        get,
        update,
        remove,
        child,
        onValue,
      } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-database.js";

      const firebaseConfig = {
        apiKey: "AIzaSyD_GdrfOLFnhWSFhpTFh4kxkdCxcx9xYbw",
        authDomain: "lawfirm-847fa.firebaseapp.com",
        databaseURL: "https://lawfirm-847fa-default-rtdb.firebaseio.com",
        projectId: "lawfirm-847fa",
        storageBucket: "lawfirm-847fa.appspot.com",
        messagingSenderId: "609784649668",
        appId: "1:609784649668:web:dfb8305b472f61a6c27691",
        measurementId: "G-ECKTV0CFKR",
      };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      const db = getDatabase(app);
      const reference = ref(db, "AssessmentQues/");

      onValue(reference, (snapshot) => {
        const questions = snapshot.val();
        display(questions);
      });

      function tableHead() {
        return "<thead><tr><th>Question Category</th><th>Question Id</th><th>Question Law Name</th><th>Question Law statements</th><th>Question</th></tr></thead>";
      }

      function display(questions) {
        let table =
          "<table><thead><tr><th>Question Category</th><th>Question Id</th><th>Question Law Name</th><th>Question Law statements</th><th>Question</th></tr></thead><tbody>";
        for (const question in questions) {
          table += "<tr><td>";
          const value = questions[question];
          for (const key in value) {
            table += value.quescat + "</td><td>" + value.quesid + "</td>";
            const laws = value.queslaws;
            let count = 0;
            for (const k in laws) {
              if (count > 0) {
                table += "</tr><tr><td></td><td></td>";
                table +=
                  "<td>" +
                  laws[k].lawname +
                  "</td><td>" +
                  laws[k].statements +
                  "</td><td></td></tr>";
              }
              table +=
                "<td>" +
                laws[k].lawname +
                "</td><td>" +
                laws[k].statements +
                "</td>";
              table += "<td>" + value.question + "</td></tr>";
              count++;
            }
          }
        }

        document.getElementById("root").innerHTML = table + "</tbody></table>";
      }
    </script>
  </body>
</html>
